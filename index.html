<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Asstrallity Mods</title>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: #0f1419;
            color: #ffffff;
            font-family: 'Roboto', sans-serif;
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }
        .sidebar {
            width: 260px;
            background: linear-gradient(180deg, #151a21 0%, #0f1419 100%);
            padding: 25px;
            display: flex;
            flex-direction: column;
            border-right: 1px solid rgba(139,182,219,0.15);
            box-shadow: 2px 0 20px rgba(0,0,0,0.4);
            position: relative;
        }
        .snowflake {
            position: absolute;
            color: rgba(139, 182, 219, 0.3);
            font-size: 10px;
            animation: snowfall linear infinite;
            pointer-events: none;
            z-index: 0;
        }
        @keyframes snowfall {
            0% { transform: translateY(-10px) translateX(0); opacity: 0; }
            10% { opacity: 0.3; }
            90% { opacity: 0.3; }
            100% { transform: translateY(100vh) translateX(20px); opacity: 0; }
        }
        .logo {
            font-family: 'Rajdhani', sans-serif;
            font-size: 28px;
            color: #e8f4fa;
            margin-bottom: 30px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            text-shadow: 0 0 20px rgba(139, 182, 219, 0.4);
            position: relative;
            z-index: 1;
        }
        .logo i {
            color: #8bb6db;
            filter: drop-shadow(0 0 10px rgba(139, 182, 219, 0.5));
        }
        .nav-tabs {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-bottom: auto;
            position: relative;
            z-index: 1;
        }
        .nav-tab {
            padding: 12px 15px;
            background: transparent;
            border: none;
            color: #a0b0c0;
            font-size: 15px;
            cursor: pointer;
            text-align: left;
            border-radius: 8px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .nav-tab:hover {
            background: rgba(139,182,219,0.08);
            color: #e8f4fa;
        }
        .nav-tab.active {
            background: rgba(139,182,219,0.12);
            color: #e8f4fa;
            font-weight: 500;
            border-left: 2px solid #8bb6db;
        }
        .nav-tab i {
            width: 20px;
            text-align: center;
        }
        .content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            background: linear-gradient(135deg, #0f1419 0%, #151a21 100%);
            position: relative;
        }
        .content-snow {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }
        .content-snow .snowflake { font-size: 12px; }
        .content::-webkit-scrollbar { width: 8px; }
        .content::-webkit-scrollbar-track { background: rgba(139,182,219,0.05);}
        .content::-webkit-scrollbar-thumb {background: rgba(139,182,219,0.2); border-radius: 4px;}
        .tab-content { display: none; position: relative; z-index: 1; }
        .tab-content.active { display: block; animation: fadeIn 0.3s;}
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px);} to { opacity: 1; transform: translateY(0);}}
        .content-header {
            display: flex; align-items: center; justify-content: space-between; margin-bottom: 25px;
        }
        .refresh-btn {
            padding: 10px 20px;
            background: rgba(139,182,219,0.08);
            border: 1px solid rgba(139,182,219,0.15);
            border-radius: 8px;
            color: #a0b0c0;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            font-family: 'Roboto', sans-serif;
            font-weight: 500;
        }
        .refresh-btn:hover {
            background: rgba(139,182,219,0.12);
            border-color: rgba(139,182,219,0.25);
            color: #e8f4fa;
        }
        .refresh-btn i {font-size: 14px; transition: transform 0.6s;}
        .refresh-btn.loading i {animation: spin 1s linear infinite;}
        @keyframes spin { from { transform: rotate(0deg);} to { transform: rotate(360deg);}}
        .mod-grid {display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;}
        .mod-card {
            background: rgba(21,26,33,0.6);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid rgba(139,182,219,0.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .mod-card:hover {
            transform: translateY(-5px);
            border-color: rgba(139,182,219,0.3);
            box-shadow: 0 10px 30px rgba(139,182,219,0.15);
        }
        .mod-img {width:100%;height:170px;object-fit:cover;background:linear-gradient(135deg,#1a2028 0%,#0f1419 100%);border-bottom:1px solid rgba(139,182,219,0.1);}
        .mod-body {padding: 20px;}
        .mod-title {font-size: 18px;font-weight:bold;margin-bottom:8px;color:#e8f4fa;}
        .mod-author {font-size: 12px;color:#7a8a9a;margin-bottom:10px;display:flex;align-items:center;gap:5px;}
        .mod-desc {font-size: 13px;color:#a0b0c0;height:36px;overflow:hidden;margin-bottom: 15px;line-height: 1.4;}
        .btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, rgba(139,182,219,0.15) 0%, rgba(139,182,219,0.08) 100%);
            color: #8bb6db;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
            border: 1px solid rgba(139,182,219,0.2);
        }
        .btn:hover {
            background: linear-gradient(135deg, rgba(139,182,219,0.25), rgba(139,182,219,0.15));
            border-color: rgba(139,182,219,0.4);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139,182,219,0.2);
        }
        .btn:active { transform: scale(0.98);}
        .settings-section {
            background: rgba(21,26,33,0.4);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(139,182,219,0.1);
        }
        .settings-section h3 {
            font-family: 'Rajdhani', sans-serif;
            font-size: 22px;
            margin-bottom: 20px;
            color: #e8f4fa;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .install-mode-toggle {display: flex; gap: 10px; margin-top: 15px;}
        .mode-btn {
            flex: 1;
            padding: 15px 20px;
            background: rgba(15,20,25,0.6);
            border: 2px solid rgba(139,182,219,0.15);
            border-radius: 10px;
            color: #a0b0c0;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        .mode-btn i { font-size: 24px;}
        .mode-btn:hover {background:rgba(139,182,219,0.08);border-color:rgba(139,182,219,0.3);}
        .mode-btn.active {background:rgba(74,158,255,0.15);border-color:#4a9eff;color:#4a9eff;box-shadow:0 0 20px rgba(74,158,255,0.3);}
        .mode-label {font-size: 13px;opacity: 0.7;}
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px; margin-top: 15px;
        }
        .info-card {
            background: rgba(21,26,33,0.4);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 25px;
            border: 1px solid rgba(139,182,219,0.1);
            transition: all 0.3s;
        }
        .info-card:hover {border-color:rgba(139,182,219,0.3);transform:translateY(-3px);}
        .info-card-header {
            display:flex;align-items:center;gap:12px;margin-bottom:15px;}
        .info-card-icon {
            width:40px;height:40px;background:linear-gradient(135deg,rgba(139,182,219,0.15),rgba(74,158,255,0.15));
            border-radius:10px;
            display:flex;align-items:center;justify-content:center;
            font-size:20px;color:#8bb6db;
        }
        .info-card-title {font-family:'Rajdhani',sans-serif;font-size:18px;font-weight:600;color:#e8f4fa;}
        .info-card-content {color:#a0b0c0;font-size:14px;line-height:1.6;}
        .info-card-content strong {color: #8bb6db;}
        .version-badge {
            display:inline-block; padding:4px 12px; background:rgba(74,158,255,0.15);
            border:1px solid rgba(74,158,255,0.3); border-radius:6px; color:#4a9eff;
            font-size:12px; font-weight:600; margin-top:10px;
        }
        .status-box { margin-top: auto; padding:20px;background:rgba(21,26,33,0.5);backdrop-filter:blur(10px);border-radius:12px;border:1px solid rgba(139,182,219,0.15);position:relative;z-index:1;}
        .status-line {display:flex;align-items:center;gap:12px;}
        .status-pulse {width:10px;height:10px;border-radius:50%;background:#4a9eff;box-shadow:0 0 15px rgba(74,158,255,0.8);animation:pulse-glow 2s ease-in-out infinite;}
        @keyframes pulse-glow {0%,100%{transform:scale(1);opacity:1;}50%{transform:scale(1.2);opacity:0.7;}}
        .status-text {font-size:13px;color:#a0b0c0;font-weight:500;}
        .status-text.connected {color:#8bb6db;}
        .status-text.disconnected {color:#ff6b6b;}
        .status-pulse.disconnected {background:#ff6b6b;box-shadow:0 0 15px rgba(255,107,107,0.8);animation:none;}
        h2 { font-family:'Rajdhani',sans-serif;margin:0;color:#e8f4fa;font-size:32px;font-weight:700;letter-spacing:1px;text-shadow:0 0 20px rgba(139,182,219,0.3);}
        .loading {color:#7a8a9a;font-size:14px;}
        .error {color:#ff6b6b;padding:20px;background:rgba(255,107,107,0.08);border-radius:8px;border:1px solid rgba(255,107,107,0.2);}
        /* ... Modal CSS не менялся, см выше ... */
    </style>
</head>
<body>
    <div class="sidebar">
        <!-- Снежинки -->
        <div class="snowflake" style="left:10%;animation-duration:15s;animation-delay:0s;">❄</div>
        <div class="snowflake" style="left:30%;animation-duration:18s;animation-delay:2s;">❄</div>
        <div class="snowflake" style="left:50%;animation-duration:20s;animation-delay:4s;">❄</div>
        <div class="snowflake" style="left:70%;animation-duration:16s;animation-delay:6s;">❄</div>
        <div class="snowflake" style="left:85%;animation-duration:19s;animation-delay:8s;">❄</div>
        <div class="logo"><i class="fas fa-cube"></i> ASSTRALLITY</div>
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('mods')">
                <i class="fas fa-th-large"></i> Моды
            </button>
            <button class="nav-tab" onclick="switchTab('settings')">
                <i class="fas fa-cog"></i> Настройки
            </button>
            <button class="nav-tab" onclick="switchTab('info')">
                <i class="fas fa-info-circle"></i> Информация
            </button>
        </div>
        <div class="status-box">
            <div class="status-line">
                <div class="status-pulse" id="statusPulse"></div>
                <div class="status-text" id="statusText">Соединение установлено</div>
            </div>
        </div>
    </div>
    <div class="content">
        <!-- Снежинки над контентом -->
        <div class="content-snow">
            <div class="snowflake" style="left:5%;animation-duration:17s;animation-delay:0s;">❄</div>
            <div class="snowflake" style="left:15%;animation-duration:22s;animation-delay:1s;">❄</div>
            <div class="snowflake" style="left:25%;animation-duration:19s;animation-delay:3s;">❄</div>
            <div class="snowflake" style="left:35%;animation-duration:21s;animation-delay:2s;">❄</div>
            <div class="snowflake" style="left:45%;animation-duration:18s;animation-delay:5s;">❄</div>
            <div class="snowflake" style="left:55%;animation-duration:20s;animation-delay:4s;">❄</div>
            <div class="snowflake" style="left:65%;animation-duration:23s;animation-delay:6s;">❄</div>
            <div class="snowflake" style="left:75%;animation-duration:16s;animation-delay:7s;">❄</div>
            <div class="snowflake" style="left:85%;animation-duration:19s;animation-delay:2s;">❄</div>
            <div class="snowflake" style="left:95%;animation-duration:21s;animation-delay:8s;">❄</div>
        </div>

        <div id="tab-mods" class="tab-content active">
            <div class="content-header">
                <h2>ДОСТУПНЫЕ МОДЫ</h2>
                <button class="refresh-btn" onclick="refreshMods()" id="refreshBtn">
                    <i class="fas fa-sync-alt"></i> Обновить
                </button>
            </div>
            <div id="grid" class="mod-grid">
                <div class="loading">Загрузка списка с GitHub...</div>
            </div>
        </div>

        <div id="tab-settings" class="tab-content">
            <h2 style="margin-bottom:25px;">НАСТРОЙКИ</h2>
            <div class="settings-section">
                <h3><i class="fas fa-folder-open"></i> Режим установки</h3>
                <p style="color:#a0b0c0;font-size:14px;margin-bottom:15px;">Выберите способ установки модов:</p>
                <div class="install-mode-toggle">
                    <button class="mode-btn active" id="sdlsBtn" onclick="setInstallMode('sdls')">
                        <i class="fas fa-shield-alt"></i>
                        <div>sDLS</div>
                        <div class="mode-label">Документы/packs</div>
                    </button>
                    <button class="mode-btn" id="noSdlsBtn" onclick="setInstallMode('nosdls')">
                        <i class="fas fa-folder"></i>
                        <div>No-sDLS</div>
                        <div class="mode-label">Папка игры/Data</div>
                    </button>
                </div>
            </div>
        </div>

        <div id="tab-info" class="tab-content">
            <h2>ИНФОРМАЦИЯ</h2>
            <div class="info-grid">
                <div class="info-card">
                    <div class="info-card-header"><div class="info-card-icon"><i class="fas fa-rocket"></i></div><div class="info-card-title">О программе</div></div>
                    <div class="info-card-content">
                        <strong>Asstrallity Mods Loader</strong> — современный загрузчик модов для World of Tanks Blitz с интуитивным интерфейсом и автоматической установкой.
                        <span class="version-badge">v1.0</span>
                    </div>
                </div>
                <div class="info-card">
                    <div class="info-card-header"><div class="info-card-icon"><i class="fas fa-code"></i></div><div class="info-card-title">Разработчики</div></div>
                    <div class="info-card-content">
                        <strong>Лаунчер:</strong> ASSTRALLITY<br>
                        <strong>Дизайн:</strong> ASSTRALLITY<br>
                        <strong>Backend:</strong> Python + PyQt6
                    </div>
                </div>
                <div class="info-card">
                    <div class="info-card-header"><div class="info-card-icon"><i class="fas fa-users"></i></div><div class="info-card-title">Авторы модов</div></div>
                    <div class="info-card-content">
                        Все моды созданы сообществом модеров World of Tanks Blitz и размещены в открытом репозитории GitHub.
                    </div>
                </div>
                <div class="info-card">
                    <div class="info-card-header"><div class="info-card-icon"><i class="fas fa-download"></i></div><div class="info-card-title">Как использовать</div></div>
                    <div class="info-card-content">
                        1. Выберите режим установки<br>
                        2. Перейдите во вкладку "Моды"<br>
                        3. Нажмите "Установить" на моде<br>
                        4. Готово!
                    </div>
                </div>
                <div class="info-card">
                    <div class="info-card-header"><div class="info-card-icon"><i class="fas fa-shield-alt"></i></div><div class="info-card-title">Безопасность</div></div>
                    <div class="info-card-content">
                        Все моды проверены и безопасны. Используется защищённый протокол HTTPS для загрузки файлов из GitHub.
                    </div>
                </div>
                <div class="info-card">
                    <div class="info-card-header"><div class="info-card-icon"><i class="fab fa-github"></i></div><div class="info-card-title">Репозиторий</div></div>
                    <div class="info-card-content">
                        <strong>GitHub:</strong><br>
                        asstrallity-ui/Tanks_Blitz_Mods_Files
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно (оставьте по вашему шаблону) -->

    <script>
        const REPO_OWNER = "asstrallity-ui";
        const REPO_NAME = "Tanks_Blitz_Mods_Files";
        const BRANCH = "main";
        const REPO_ROOT = `https://raw.githubusercontent.com/${REPO_OWNER}/${REPO_NAME}/${BRANCH}/`;
        const MODS_JSON = REPO_ROOT + "mods.json";
        let isRefreshing = false;
        let installMode = 'sdls';

        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(btn => btn.classList.remove('active'));
            document.getElementById('tab-' + tabName).classList.add('active');
            event.target.classList.add('active');
        }
        function setInstallMode(mode) {
            installMode = mode;
            document.getElementById('sdlsBtn').classList.remove('active');
            document.getElementById('noSdlsBtn').classList.remove('active');
            if (mode === 'sdls') {
                document.getElementById('sdlsBtn').classList.add('active');
            } else {
                document.getElementById('noSdlsBtn').classList.add('active');
            }
            console.log('SET_MODE:' + mode);
        }
        function refreshMods() {
            if (isRefreshing) return;
            isRefreshing = true;
            var refreshBtn = document.getElementById('refreshBtn');
            refreshBtn.classList.add('loading');
            refreshBtn.disabled = true;
            console.log('REFRESH_MODS');
            loadMods();
        }
        function loadMods() {
            fetch(MODS_JSON + '?t=' + Date.now())
                .then(res => {
                    if (!res.ok) throw new Error(`HTTP ${res.status}`);
                    return res.json();
                })
                .then(data => {
                    var modsArray = Array.isArray(data) ? data : (data.mods || []);
                    if (modsArray.length > 0) renderMods(modsArray);
                    else throw new Error('Моды не найдены в JSON');
                })
                .catch(err => {
                    document.getElementById('grid').innerHTML =
                        `<div class="error">
                            <i class="fas fa-exclamation-triangle"></i>
                            Ошибка загрузки: ${err.message}
                        </div>`;
                })
                .finally(()=>{
                    isRefreshing = false;
                    var refreshBtn = document.getElementById('refreshBtn');
                    refreshBtn.classList.remove('loading');
                    refreshBtn.disabled = false;
                });
        }
        function renderMods(mods) {
            var grid = document.getElementById('grid');
            grid.innerHTML = '';
            if (mods.length === 0) {
                grid.innerHTML = '<div class="loading">Моды не найдены</div>';
                return;
            }
            mods.forEach(function(mod) {
                var fileUrl = mod.file || mod.dataFile;
                var imageUrl = mod.image || mod.preview;
                var dataFileUrl = fileUrl.startsWith('http') ? fileUrl : REPO_ROOT + fileUrl;
                var previewUrl = imageUrl.startsWith('http') ? imageUrl : REPO_ROOT + imageUrl;
                var card = document.createElement('div');
                card.className = 'mod-card';
                card.innerHTML = `
                    <img src="${previewUrl}" class="mod-img" alt="${mod.name}"
                        onerror="this.src='https://via.placeholder.com/300x170/1a2028/8bb6db?text=No+Preview'">
                    <div class="mod-body">
                        <div class="mod-title">${mod.name}</div>
                        <div class="mod-author">
                            <i class="fas fa-user"></i>
                            ${mod.author || 'Неизвестен'}
                        </div>
                        <div class="mod-desc">${mod.description || 'Нет описания'}</div>
                        <button class="btn" onclick="install('${dataFileUrl}', '${mod.name}')">
                            <i class="fas fa-download"></i> УСТАНОВИТЬ
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }
        function install(url, name) {
            console.log('INSTALL_MOD:' + url + ':' + installMode);
        }
        // Минималистичный зимний статус (JS-демо)
        function updateConnectionStatus(connected) {
            var statusPulse = document.getElementById('statusPulse');
            var statusText = document.getElementById('statusText');
            if (connected) {
                statusPulse.classList.remove('disconnected');
                statusText.textContent = 'Соединение установлено';
                statusText.classList.add('connected');
                statusText.classList.remove('disconnected');
            } else {
                statusPulse.classList.add('disconnected');
                statusText.textContent = 'Нет соединения';
                statusText.classList.add('disconnected');
                statusText.classList.remove('connected');
            }
        }
        // Первичная загрузка
        loadMods();
    </script>
</body>
</html>
