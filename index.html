<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asstrallity Loader</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a; /* –¢–µ–º–Ω–æ-—Å–µ—Ä—ã–π —Ñ–æ–Ω */
            color: #ffffff;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* --- –®–ê–ü–ö–ê (–æ—Å—Ç–∞–≤–∏–ª –∫–∞–∫ –µ—Å—Ç—å, –Ω–æ –±–µ–∑ —Ä–∞–∑–º—ã—Ç–∏—è —Ñ–æ–Ω–∞) --- */
        .top-bar {
            background: #0f0f0f;
            border-bottom: 1px solid #1a1a1a;
            padding: 0 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 64px;
            flex-shrink: 0;
        }
        
        .logo { font-size: 18px; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; }
        .tabs { display: flex; gap: 8px; }
        .tab {
            padding: 8px 20px; background: transparent; border: none;
            border-radius: 20px; color: #808080; font-size: 14px;
            font-weight: 500; cursor: pointer; transition: background 0.2s;
        }
        .tab:hover { background: #1a1a1a; color: #ffffff; }
        .tab.active { background: #ffffff; color: #0a0a0a; }
        
        /* --- –ö–û–ù–¢–ï–ù–¢ --- */
        .content {
            flex: 1;
            overflow-y: auto;
            padding: 32px;
        }
        
        .content::-webkit-scrollbar { width: 8px; }
        .content::-webkit-scrollbar-track { background: #0a0a0a; }
        .content::-webkit-scrollbar-thumb { background: #2a2a2a; border-radius: 4px; }
        
        .tab-content { display: none; max-width: 1400px; margin: 0 auto; }
        .tab-content.active { display: block; }
        
        .loading { text-align: center; padding: 120px 20px; color: #808080; }
        
        /* --- –°–ï–¢–ö–ê –ú–û–î–û–í --- */
        .mods-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        
        .mod-card {
            background: #111;
            border: 1px solid #1a1a1a;
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .mod-preview { 
            width: 100%; 
            height: 180px; 
            object-fit: cover; 
            background: #1a1a1a; 
        }
        
        .mod-info { padding: 16px; flex: 1; display: flex; flex-direction: column; }
        .mod-name { font-size: 16px; font-weight: 600; margin-bottom: 6px; }
        .mod-description { font-size: 13px; color: #808080; margin-bottom: 12px; flex: 1; }
        .mod-meta { font-size: 11px; color: #555; margin-bottom: 12px; display: flex; justify-content: space-between; }
        
        .install-btn {
            width: 100%; padding: 10px; background: #ffffff; color: #0a0a0a;
            border: none; border-radius: 8px; font-size: 13px; font-weight: 600;
            cursor: pointer;
        }
        .install-btn:hover { background: #e0e0e0; }
        .install-btn:disabled { background: #333; color: #777; cursor: not-allowed; }

        /* --- –ù–ê–°–¢–†–û–ô–ö–ò --- */
        .settings-section {
            background: #111; border: 1px solid #1a1a1a;
            border-radius: 12px; padding: 20px; margin-bottom: 16px;
        }
        .settings-section h2 { font-size: 16px; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        
        .setting-input {
            width: 100%; padding: 10px; background: #0a0a0a; border: 1px solid #222;
            border-radius: 8px; color: #fff; margin-bottom: 8px;
        }
        
        .setting-btn {
            padding: 8px 16px; background: #222; color: #fff; border: 1px solid #333;
            border-radius: 8px; cursor: pointer; font-size: 13px;
        }
        .setting-btn.primary { background: #fff; color: #000; border: none; }

        /* --- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û --- */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.8); z-index: 100; align-items: center; justify-content: center;
        }
        .modal-overlay.show { display: flex; }
        .modal { background: #1a1a1a; padding: 24px; border-radius: 12px; max-width: 350px; width: 100%; text-align: center; }
        .modal-btn { margin-top: 16px; width: 100%; padding: 10px; background: #fff; border: none; border-radius: 6px; cursor: pointer; }

    </style>
</head>
<body>

    <div class="top-bar">
        <div class="logo">ASSTRALLITY</div>
        <div class="tabs">
            <button class="tab active" data-tab="mods" data-i18n="tab_mods">–ú–æ–¥—ã</button>
            <button class="tab" data-tab="settings" data-i18n="tab_settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            <button class="tab" data-tab="about" data-i18n="tab_about">–û –ø—Ä–æ–≥—Ä–∞–º–º–µ</button>
        </div>
    </div>
    
    <div class="content">
        <div class="tab-content active" id="mods-tab">
            <div class="loading"><div data-i18n="loading_mods">–ó–∞–≥—Ä—É–∑–∫–∞...</div></div>
            <div class="mods-grid" id="mods-container"></div>
        </div>

        <div class="tab-content" id="settings-tab">
            <div class="settings-section">
                <h2>üåê <span data-i18n="game_search_title">–ü–æ–∏—Å–∫ –∏–≥—Ä—ã</span></h2>
                <button class="setting-btn primary" id="find-game-btn" data-i18n="find_game_btn">–ù–∞–π—Ç–∏ –∏–≥—Ä—É</button>
            </div>
            <div class="settings-section">
                <h2>üìÇ <span data-i18n="paths_title">–ü—É—Ç–∏</span></h2>
                <input type="text" class="setting-input" id="path-display" readonly placeholder="–ü—É—Ç—å –∫ Data">
                <input type="text" class="setting-input" id="exe-display" readonly placeholder="–ü—É—Ç—å –∫ Exe">
                <button class="setting-btn" id="change-path-btn" data-i18n="change_btn">–ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é</button>
            </div>
        </div>

        <div class="tab-content" id="about-tab">
            <div class="settings-section">
                <h2>‚ÑπÔ∏è Asstrallity Loader</h2>
                <p style="color:#888; font-size:13px;">–í–µ—Ä—Å–∏—è 1.0.0</p>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal">
        <div class="modal">
            <div id="modal-title" style="font-weight:bold; margin-bottom:8px;"></div>
            <div id="modal-message" style="color:#aaa; font-size:13px;"></div>
            <button class="modal-btn" onclick="closeModal()">OK</button>
        </div>
    </div>

    <script>
        const MODS_URL = 'https://raw.githubusercontent.com/asstrallity-ui/Loader_Blitz/main/mods.json';
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è Python (Python —Å–ª—É—à–∞–µ—Ç –∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è)
        window.clickedModFile = null;
        window.clickedModIndex = null;
        window.changePathClicked = false;
        window.findGameClicked = false;
        
        async function loadMods() {
            try {
                const r = await fetch(MODS_URL);
                const d = await r.json();
                showMods(d.mods || []);
            } catch(e) {
                document.querySelector('.loading').textContent = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏';
            }
        }
        
        function showMods(mods) {
            const c = document.getElementById('mods-container');
            document.querySelector('.loading').style.display = 'none';
            
            c.innerHTML = mods.map((m, i) => `
                <div class="mod-card">
                    <img class="mod-preview" src="${m.preview}" alt="">
                    <div class="mod-info">
                        <div class="mod-name">${m.name}</div>
                        <div class="mod-description">${m.description}</div>
                        <div class="mod-meta"><span>v${m.version}</span><span>${m.author}</span></div>
                        <button class="install-btn" id="btn-${i}" data-index="${i}" data-file="${m.dataFile}">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                    </div>
                </div>
            `).join('');
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤
        document.addEventListener('click', e => {
            if (e.target.classList.contains('install-btn')) {
                const btn = e.target;
                if(btn.disabled) return;
                
                // 1. –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
                btn.disabled = true;
                btn.textContent = "–û–∂–∏–¥–∞–Ω–∏–µ...";
                
                // 2. –ü–µ—Ä–µ–¥–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Python
                window.clickedModFile = btn.getAttribute('data-file');
                window.clickedModIndex = parseInt(btn.getAttribute('data-index'));
            }
            
            if (e.target.id === 'change-path-btn') window.changePathClicked = true;
            if (e.target.id === 'find-game-btn') window.findGameClicked = true;
        });

        // –§—É–Ω–∫—Ü–∏–∏, –≤—ã–∑—ã–≤–∞–µ–º—ã–µ –∏–∑ Python
        window.updatePaths = (dataPath, exePath, found) => {
            document.getElementById('path-display').value = dataPath || '';
            document.getElementById('exe-display').value = exePath || '';
        };

        window.setInstallProgress = (index, progress) => {
            const btn = document.getElementById(`btn-${index}`);
            if (!btn) return;

            if (progress < 100) {
                btn.textContent = `–ó–∞–≥—Ä—É–∑–∫–∞ ${progress}%`;
                btn.style.background = `linear-gradient(90deg, #fff ${progress}%, #333 ${progress}%)`;
                btn.style.color = progress > 50 ? '#000' : '#fff';
            } else {
                btn.textContent = "–ì–æ—Ç–æ–≤–æ";
                setTimeout(() => {
                    btn.textContent = "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å";
                    btn.disabled = false;
                    btn.style.background = "#fff";
                    btn.style.color = "#000";
                }, 2000);
            }
        };

        window.showModal = (type, title, message) => {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-message').textContent = message;
            document.getElementById('modal').classList.add('show');
        };
        
        window.closeModal = () => document.getElementById('modal').classList.remove('show');

        // –¢–∞–±—ã
        document.querySelectorAll('.tab').forEach(t => {
            t.onclick = function() {
                document.querySelectorAll('.tab').forEach(x => x.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(x => x.classList.remove('active'));
                this.classList.add('active');
                document.getElementById(this.dataset.tab + '-tab').classList.add('active');
            };
        });

        window.onload = loadMods;
    </script>
</body>
</html>
